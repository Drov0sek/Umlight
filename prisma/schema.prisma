generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model students {
  id                Int                 @id @default(autoincrement())
  name              String
  login             String
  password          String
  surname           String?
  gender            String?
  nickname          String?
  email             String?
  age               Int?
  image             String?
  description       String?
  courses_students  courses_students[]
  students_subjects students_subjects[]
  teacher_student   teacher_student[]
}

model teacher_student {
  teacher_id Int
  student_id Int
  students   students @relation(fields: [student_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  teachers   teachers @relation(fields: [teacher_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([teacher_id, student_id])
}

model teachers {
  id                Int                 @id @default(autoincrement())
  name              String
  surname           String
  email             String
  login             String
  password          String
  gender            String?
  description       String?
  image             String?
  age               Int?
  courses           courses[]
  teacher_student   teacher_student[]
  teachers_subjects teachers_subjects[]
}

model courses {
  id               Int                @id @default(autoincrement())
  name             String
  description      String             @db.VarChar(500)
  titleImage       String
  time             Int
  authorid         Int
  teachers         teachers           @relation(fields: [authorid], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fkauthor")
  courses_modules  courses_modules[]
  courses_students courses_students[]
  courses_tags     courses_tags[]
}

model courses_modules {
  courseid Int
  moduleid Int
  courses  courses @relation(fields: [courseid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  modules  modules @relation(fields: [moduleid], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([courseid, moduleid])
}

model courses_tags {
  courseid Int
  tagid    Int
  courses  courses @relation(fields: [courseid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  tags     tags    @relation(fields: [tagid], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([courseid, tagid])
}

model lesson {
  id                Int                 @id @default(autoincrement())
  name              String
  type              String
  description       String?             @db.VarChar(250)
  video             String?
  time              Int?
  numberoflesson    Int?
  lesson_tasks      lesson_tasks[]
  lessons_materials lessons_materials[]
  modules_lessons   modules_lessons[]
}

model lessons_materials {
  lessonid   Int
  materialid Int
  lesson     lesson    @relation(fields: [lessonid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  materials  materials @relation(fields: [materialid], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([lessonid, materialid])
}

model materials {
  id                Int                 @id @default(autoincrement())
  material          String?
  materialName      String?
  lessons_materials lessons_materials[]
}

model modules {
  id              Int               @id
  name            String
  numberofmodule  Int
  courses_modules courses_modules[]
  modules_lessons modules_lessons[]
}

model tags {
  id           Int            @id @default(autoincrement())
  tag          String?
  courses_tags courses_tags[]
}

model courses_students {
  courseid  Int
  studentid Int
  courses   courses  @relation(fields: [courseid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  students  students @relation(fields: [studentid], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([courseid, studentid])
}

model lesson_tasks {
  id        Int     @id
  text      String
  image     String?
  answer    String
  lesson_id Int?
  lesson    lesson? @relation(fields: [lesson_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_lesson")
}

model modules_lessons {
  moduleid Int
  lessonid Int
  lesson   lesson  @relation(fields: [lessonid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  modules  modules @relation(fields: [moduleid], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([lessonid, moduleid])
}

model auth_users {
  id      Int    @id @default(autoincrement())
  user_id Int
  role    String
}

model students_subjects {
  id         Int      @id @default(autoincrement())
  student_id Int
  subject_id Int
  students   students @relation(fields: [student_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  subjects   subjects @relation(fields: [subject_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model teachers_subjects {
  id         Int      @id @default(autoincrement())
  teacher_id Int
  subject_id Int
  subjects   subjects @relation(fields: [subject_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  teachers   teachers @relation(fields: [teacher_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model subjects {
  id                Int                 @id @default(autoincrement())
  subject           String
  students_subjects students_subjects[]
  teachers_subjects teachers_subjects[]
  public_tasks      public_tasks[]
}

model user_sessions {
  sid    String   @id(map: "session_pkey") @db.VarChar
  sess   Json     @db.Json
  expire DateTime @db.Timestamp(6)

  @@index([expire], map: "IDX_session_expire")
}

model public_tasks {
  id         Int      @id @default(autoincrement())
  text       String
  image      String?
  answer     String?
  solution   String?
  type       String?
  time       String?
  subject_id Int
  subjects   subjects @relation(fields: [subject_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}
